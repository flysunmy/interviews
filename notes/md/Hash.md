# Hash

1. 什么是Hash

   Hash是哈希,散列.基本原理就是把任意长度的输入,通过hash算法变成固定长度的输出.这个映射规则就是哈希算法.MD5和SHA算法都是比较经典的哈希算法.

2. Hash的特点

   一个优秀的hash算法需要满足以下几个条件:

   - 从哈希值不可以推算出原始(不可逆)

   - 输入数据差异较小,计算的hash值尽可能不同

   - hash算法要高效,对于大数据也能快速计算出其hash值

   - hash算法尽量避免hash冲突(不可避免)

     由于hash的原理是将输入空间的值映射成hash空间内，而hash值的空间远小于输入的空间.根据抽屉原理,一定会存在不同的输入被映射成相同输出的情况.那么作为一个好的hash算法,就需要这种冲突的概率尽可能小.

3. Hash冲突的解决方法

   - 链式地址法(HashMap中解决hash冲突)

     链式地址法是用一个链表数组来存储hash节点,当hash节点发生冲突时候,会把新的hash值插入链表的头部或者尾部进行存储.

     ![linked](..\img\linked.png)

     链地址在处理的流程如下：
     添加一个元素的时候，首先计算元素key的hash值，确定插入数组中的位置。如果当前位置下没有重复数据，则直接添加到当前位置.当遇到冲突的时候，添加到同一个hash值的元素后面，行成一个链表.这个链表的特点是同一个链表上的Hash值相同.java的数据结构HashMap使用的就是这种方法来处理冲突，JDK1.8中，针对链表上的数据超过8条的时候，使用了红黑树进行优化.

   - 开放地址发(ThreadLocalMap中解决hash冲突)

     开发地址法是开放地址法是指大小为 M 的数组保存 N 个键值对，其中 M > N。我们需要依靠数组中的空位解决碰撞冲突。基于这种策略的所有方法被统称为“开放地址”哈希表。线性探测法，就是比较常用的一种“开放地址”哈希表的一种实现方式。线性探测法的核心思想是当冲突发生时，顺序查看表中下一单元，直到找出一个空单元或查遍全表。简单来说就是：一旦发生冲突，就去寻找下 一个空的散列表地址，只要散列表足够大，空的散列地址总能找到。

4. Hash应用

   - 数据加密: MD5, SHA
   - 数据验证: 下载文件md5值验证, git commit id
   - 负载均衡: Nginx, Dubbo寻址



